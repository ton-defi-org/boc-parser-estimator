{"version":3,"sources":["App.tsx","BocExample.tsx","api.tsx","MessageAction.tsx","MessageBox.tsx","BocResult.tsx","BocInfo.tsx","index.tsx","utils.ts"],"names":["TonWeb","array_buffer_to_buffer","ab","buffer","Buffer","byteLength","view","Uint8Array","i","length","QrReader","props","once","onScanSuccess","decodedText","decodedResult","console","log","onDone","useEffect","Html5QrcodeScanner","fps","qrbox","render","undefined","className","src","id","App","initialBoc","destination","wallet","amount","flags","refLen","bocData","body","rawData","useState","boc","setBoc","bocName","setBocName","setError","file","useRef","deploying","readingQR","setReadingQrMode","params","parseQuery","window","location","search","loadBoc","base64ToArrayBuffer","onFileChange","useCallback","_event","fr","FileReader","onload","e","a","target","result","current","files","readAsArrayBuffer","fileBuffer","fileObject","name","indexOf","toString","parseBoc","value","BN","mydata","from","toFriendly","dest","to","BigNumber","div","toFormat","useDropzone","onDrop","getRootProps","onClear","estimateBoc","ref","type","onChange","htmlFor","klass","deployDoneMessage","qrReader","data","dropArea","str","bocStr","stateInit","init","bodyCell","loadBocFromStr","setName","error","BocExample","onclick","onClick","bind","BOC_BACKEND","process","REACT_APP_BOC_BACKEND","message","fetch","method","headers","res","text","MessageAction","action","index","mode","info","coins","fromNano","addressFromJson","AddressAvatar","address","size","content","toSvg","dangerouslySetInnerHTML","__html","AddressLinkAndAvatar","link","href","addressEllipsis","MessageBox","inMessage","contractAddress","actions","myAddress","exit_code","tonValue","strEllipsis","feeFmt","hexStr","nano","dotIndex","substring","TxDetails","computationFee","fwdFee","BocResult","messageList","Object","keys","map","chain","messagesChain","chainCounter","key","push","indent","loadingTime","MessagesChain","_class","Message","fromAddress","val","actionList","it","BocInfo","externalStateInit","results","setResults","isLoading","setIsLoading","setLoadingTime","runBoc","now","Date","bocResultResponse","toFixed","JSON","parse","code","buttonClass","bounce","toBoc","ReactDOM","document","getElementById","queryString","query","pairs","substr","split","pair","decodeURIComponent","base64","binary_string","atob","len","bytes","charCodeAt","base64Boc","c","Cell","fromBoc","externalMessage","parseMessage","beginParse","refs","slice","innerMessage","innerInfo","arg","hash","Address","workchain"],"mappings":"+UAee,IAAIA,IAGnB,SAASC,EAAuBC,GAG5B,IAFA,IAAMC,EAAS,IAAIC,EAAOF,EAAGG,YACvBC,EAAO,IAAIC,WAAWL,GACnBM,EAAI,EAAGA,EAAIL,EAAOM,SAAUD,EACjCL,EAAOK,GAAKF,EAAKE,GAErB,OAAOL,EAyLX,IAAMO,EAAW,SAAEC,GACf,IAAIC,GAAO,EACX,SAASC,EAAcC,EAAqBC,GACrCH,IAGHA,GAAO,EACPI,QAAQC,IAAI,gBAAgBH,GAC5BH,EAAMO,OAAOJ,IASjB,OANAK,qBAAU,WACmB,IAAIC,IAAmB,YAAa,CAAEC,IAAK,GAAIC,MAAO,MAAS,GACrEC,OAAOV,OAAeW,KAExC,IAGD,gCACI,+BAAI,qBAAKC,UAAU,UAAUC,IApNxB,uuIAoNL,kBACA,qBAAKC,GAAG,cACR,qBAAKF,UAAU,iBAMZG,IA/Lf,WACI,IAAMC,EAAa,CACfC,YAAa,IACbC,OAAQ,GACRC,OAAQ,KACRC,MAAM,KACNC,QAAS,EACTC,QAAS,IAAI5B,WAAW,GACxB6B,KAAM,GACNC,aAASb,GAIb,EAAsBc,mBAAST,GAA/B,mBAAOU,EAAP,KAAYC,EAAZ,KACA,EAA8BF,mBAAS,IAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KACA,EAA0BJ,mBAAS,IAAnC,mBAAcK,GAAd,WACMC,EAAYC,iBAAO,MACzB,EAAkCP,mBAAS,GAA3C,mBAAOQ,EAAP,KACA,GADA,KACsCR,mBAAS,IAA/C,mBAAOS,EAAP,KAAkBC,EAAlB,KACA7B,qBAAW,WACP,IAAI8B,EAASC,YAAWC,OAAOC,SAASC,QACrCJ,EAAOV,KAENe,EADYC,YAAoBN,EAAOV,KACxB,MAEpB,IAEH,IASMiB,EAAeC,uBAAY,SAACC,GACtB,IAAIC,EAAK,IAAIC,WAEbD,EAAGE,OAAH,uCAAY,WAAgBC,GAAhB,SAAAC,EAAA,sDACR/C,QAAQC,IAAI6C,EAAEE,OAAOC,QACrBX,EAAQQ,EAAEE,OAAOC,OAAQrB,EAAKsB,QAAQC,MAAM,IAFpC,2CAAZ,sDAIJR,EAAGS,kBAAkBxB,EAAKsB,QAAQC,MAAM,MAC7C,IAEH,SAASb,EAAQe,EAAiBC,GAAkB,IAAD,EAC/C,IAAwC,IAArCA,EAAWC,KAAKC,QAAQ,QAI3B,GAAGH,EAAWhE,WAAa,IACvBsC,EAAS,mEADb,CAIA3B,QAAQC,IAAI,SAAUhB,EAAuBoE,GAAYI,SAAS,WAClE,IAAItC,EAAUuC,YAASzE,EAAuBoE,GAAYI,SAAS,WAC9DtC,EAAQwC,QAETxC,EAAQwC,MAAQ,IAAIC,IAAG,MAE3B5D,QAAQC,IAAI,CAAC4D,OAAQ1C,IACrB,IAAMJ,EAAUI,EAAQ2C,KAAiBC,aACnCC,EAAQ7C,EAAQ8C,GAAeF,aAErCvC,EAAO,yBACHH,QAASpC,EAAuBoE,IAC7BlC,GAFD,IAGFJ,OAAQA,EACRD,YAAakD,EACbhD,OAAQ,IAAIkD,IAAU/C,EAAQwC,MAAMF,SAAS,KAAKU,IAAI,KAAKC,SAAS,GACpEhD,KAAI,OAAED,QAAF,IAAEA,GAAF,UAAEA,EAASC,YAAX,aAAE,EAAeqC,mBAvBrB9B,EAAS,yDA6DjB,MAAyB0C,YAAY,CAACC,OATtC,SAAgBnB,GACZ,IAAIR,EAAK,IAAIC,WACbD,EAAGE,OAAH,uCAAY,WAAgBC,GAAhB,SAAAC,EAAA,sDACRT,EAAQQ,EAAEE,OAAOC,OAAQE,EAAM,IADvB,2CAAZ,sDAGAR,EAAGS,kBAAkBD,EAAM,OAIvBoB,EAAR,EAAQA,aACFpD,EAAUI,EAAIR,OAAS,cAAC,IAAD,CAASQ,IAAKA,EAAKE,QAASA,EAAS+C,QAAS,WAAQhD,EAAOX,IAAgB4D,YAAaA,MAClH,gCAIG,sBAAMhE,UAAU,SAChB,sBAAMA,UAAU,GAAhB,eACA,uBAAOE,GAAG,cAAc+D,IAAK9C,EAAM+C,KAAK,OAAOlE,UAAU,QAAQmE,SAAUpC,IAC3E,uBAAOqC,QAAQ,cAAcpE,UAAU,iBAAvC,gCAGJqE,EAAqB,GAAbhD,EAAiB,OAAS,GAClCiD,EAAoB,KACR,GAAbjD,IACCiD,EAAoB,qBAAKtE,UAAU,iBAAf,uCAGxB,IAAIuE,EAAW,KAEXA,EADDjD,EACa,cAACrC,EAAD,CAAUQ,OAK1B,SAAkB+E,GACdjD,EAAiB,GAEjBM,EADYC,YAAoB0C,GACjB,CAAC1B,KAAK,cANV,KASf,IAAM2B,EAAY3D,EAAIJ,SAAW,IAAI5B,WAAW,GAAK,KAAQ,iCAAKkB,UAAU,aAAgB8D,MAE5F,OACI,sBAAK9D,UAAU,MAAf,UACI,qBAAKA,UAAU,QAAf,wBACA,qBAAKA,UAAU,UAAf,qDACJ,sBAAKA,UAAU,WAAf,UAEQ,cAAC,IAAD,CAAYiD,SAAU,SAACyB,IAxEnC,SAAwBC,GAAiB,IAAD,EACpC5D,EAAOX,GACP,IAAIM,EAAUuC,YAAS0B,GAClBjE,EAAQwC,QAETxC,EAAQwC,MAAQ,IAAIC,IAAG,MAE3B5D,QAAQC,IAAI,iBAAiB,CAAC4D,OAAQ1C,IAEtC,IAAMJ,EAAUI,EAAQ2C,KAAiBC,aACnCC,EAAQ7C,EAAQ8C,GAAeF,aACrCvC,EAAO,yBACHH,QAAS+D,GACNjE,GAFD,IAGFJ,OAAQA,EACRD,YAAakD,EACbhD,OAAQ,IAAIkD,IAAU/C,EAAQwC,MAAMF,SAAS,KAAKU,IAAI,KAAKC,SAAS,GACpEhD,KAAI,OAAED,QAAF,IAAEA,GAAF,UAAEA,EAASC,YAAX,aAAE,EAAeqC,WACrB4B,UAAWlE,EAAQmE,KACnBC,SAAQ,OAAGpE,QAAH,IAAGA,OAAH,EAAGA,EAASC,QAsDZoE,CAAeL,IAChBM,QAAS,SAAClC,GACT7B,EAAW6B,MAEnB,sBAAK9C,UAAWqE,EAAhB,UACSvD,EAAImE,MAAS,qBAAKjF,UAAU,YAAf,SAA4Bc,EAAImE,QAAgB,KACjEnE,EAAIR,OAAS,KAAOmE,EACpB3D,EAAIR,OAAS,KAAMiE,EACnB7D,EACA4D,c,sGC9LJY,EAAa,SAAEhG,GAExB,SAASiG,EAAQX,EAAW1B,GACxB5D,EAAM+D,SAASuB,GACftF,EAAM8F,QAAQlC,GAGlB,OACI,sBAAK9C,UAAU,WAAf,UACI,+CACA,qBAAKoF,QAASD,EAAQE,KAAK,KArBhB,2PAqBsC,aAAcrF,UAAU,aAAzE,uBAEA,qBAAKoF,QAASD,EAAQE,KAAK,KAfjB,msFAesC,iBAAkBrF,UAAU,aAA5E,2BACA,qBAAKoF,QAASD,EAAQE,KAAK,KAlBnC,mYAkB0D,YAAarF,UAAU,aAAzE,gCACA,qBAAKoF,QAASD,EAAQE,KAAK,KAtBnC,uRAsB0D,eAAgBrF,UAAU,aAA5E,qC,+FCzBNsF,EAAcC,wJAAYC,uBAA2B,wBAEpD,SAAexB,EAAtB,kC,4CAAO,WAA2ByB,GAA3B,iBAAAnD,EAAA,sEACaoD,MAAM,GAAD,OAAIJ,EAAJ,YAA2B,CAC5CK,OAAQ,OACRC,QAAS,CACL,eAAgB,oBAEpBjF,KAAK,aAAD,OAAe8E,EAAf,SANL,cACCI,EADD,gBAQcA,EAAIC,OARlB,cAQCtB,EARD,yBASIA,GATJ,4C,8JCCMuB,EAAgB,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,OAAQC,EAAiB,EAAjBA,MACpC1G,QAAQC,IAAIwG,GAEZ,IAAQ9B,EAAwB8B,EAAxB9B,KAAMgC,EAAkBF,EAAlBE,KAAMT,EAAYO,EAAZP,QACpBlG,QAAQC,IAAIiG,EAAQU,KAAKjD,MAAMkD,OAE/B,IAAMlD,EAAQmD,mBAASZ,EAAQU,KAAKjD,MAAMkD,OACpC7C,EAAO+C,YAAgBb,EAAQU,KAAK5C,MAE1C,OAAQ,sBAAKvD,UAAU,6DAAf,UAEJ,gCAAMiG,EAAM,EAAZ,IAAe,mBAAGjG,UAAU,GAAb,oBAA2BkE,KAC1C,gCAAK,mBAAGlE,UAAU,GAAb,mBAA0BkG,KAC/B,gCAAK,mBAAGlG,UAAU,GAAb,oBAA2BkD,EAAhC,kBACA,gCAAK,mBAAGlD,UAAU,GAAb,mBAA0BuD,EAAKD,aAApC,sB,SCdFiD,EAAgB,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,QAASC,EAAgB,EAAhBA,KACxBC,EAAUC,YAAMH,EAASC,GAE/B,OAAO,sBAAMzG,UAAU,iBAAiB4G,wBAAyB,CAAEC,OAAQH,MAIzEI,EAAuB,SAAC,GAAsB,IAApBN,EAAmB,EAAnBA,QAEtBO,EAAI,sCAAkCP,EAAQlD,cACpD,OAAQ,qBAAKtD,UAAU,kBAAf,SACJ,oBAAGgH,KAAMD,EAAT,UACI,cAAC,EAAD,CAAeN,KAAM,GAAID,QAASA,EAAQlD,eAC1C,uBACC2D,YAAgBT,EAAQlD,oBAKxB4D,EAAa,SAAC,GAAuB,IAApBzB,EAAmB,EAAnBA,QAE1B,IAAKA,EACD,OAAO,wCAEX,IAAQ0B,EAAyD1B,EAAzD0B,UAAW9D,EAA8CoC,EAA9CpC,KAAM+D,EAAwC3B,EAAxC2B,gBAAiBC,EAAuB5B,EAAvB4B,QAEpCC,GAF2D7B,EAAd8B,UAC/BjB,YAAgBjD,GAClBiD,YAAgBc,IAC5BI,EAAWnB,mBAASc,EAAUjE,MAAMF,YAQ1C,OACI,mCACI,sBAAKhD,UAAU,eAAf,UACI,cAAC,EAAD,CAAsBwG,QAASc,IAC/B,cAAC,EAAD,CAAW7B,QAASA,IAEpB,sBAAKzF,UAAU,oBAAf,UAGI,sBAAKA,UAAU,oBAAf,oBAA2CwH,EAA3C,kBACA,gCACI,wCACA,qBAAKxH,UAAU,mBAAf,SAAmCyH,YAAYN,EAAUxG,KAAKqC,WAAY,SAI9E,gDAAQ,mBAAGhD,UAAU,mBAAb,qBAAR,KAAsDqH,EAAQrI,UAC9D,gCAQpB,SAAS0I,EAAOC,GACZ,IAAIC,EAAOvB,mBAASsB,GAChBE,EAAWD,EAAK7E,QAAQ,KAC5B,OAAO6E,EAAKE,UAAU,EAAGD,EAAW,GAIjC,IAAME,EAAY,SAAC,GAAsB,IAApBtC,EAAmB,EAAnBA,QAExB,OAAQ,sBAAKzF,UAAU,iBAAf,UAEJ,sBAAKA,UAAU,UAAf,UACI,yCACA,sBAAKA,UAAU,YAAf,UAA4B0H,EAAOjC,EAAQuC,gBAA3C,qBAGJ,sBAAKhI,UAAU,UAAf,UACI,qCACA,sBAAKA,UAAU,YAAf,UAA4B0H,EAAOjC,EAAQwC,QAA3C,qBAEJ,sBAAKjI,UAAU,UAAf,UACI,2CACA,qBAAKA,UAAU,YAAf,SAA4ByF,EAAQ8B,mBCjFnCW,EAAY,SAAChJ,GACtBK,QAAQC,IAAIN,GAEZ,IAAQiJ,EAAgBjJ,EAAhBiJ,YAER,GADA5I,QAAQC,IAAI2I,IACPA,GAAkD,GAAnCC,OAAOC,KAAKF,GAAanJ,OACzC,OAAO,wBAEMmJ,EAAYA,YAAYG,KAAM,SAAC7C,EAAcQ,GAC1D,OAAO,cAAC,EAAD,CAASR,QAASA,GAAcQ,MAD3C,IAIQsC,EAAUJ,EAAVI,MACFC,EAAgB,GAClBC,EAAe,EACnB,IAAI,IAAMC,KAAOH,EACbC,EAAcG,KAAM,cAAC,EAAD,CAAeJ,MAAOA,EAAMG,GAAgBE,OAAQH,KAAbC,IAK/D,OACI,sBAAK1I,UAAU,aAAf,UACI,qBAAKA,UAAU,mBAAf,SACKd,EAAM2J,cAEVL,MAOPM,EAAgB,SAAC,GAA4B,IAA1BP,EAAyB,EAAzBA,MAAOK,EAAkB,EAAlBA,OACtBJ,EAAgBD,EAAMD,KAAM,SAAC7C,EAAcQ,GAC7C,OAAO,cAAC,EAAD,CAAYR,QAASA,GAAcQ,MAExC8C,EAAM,sBAAkBH,GAC9B,OAAQ,qBAAK5I,UAAW+I,EAAhB,SACHP,KAQHQ,EAAU,SAAC,GAAuB,IAApBvD,EAAmB,EAAnBA,QAEhB,IAAKA,EACD,OAAO,wCAEX,IAAQ0B,EAA8C1B,EAA9C0B,UAAW9D,EAAmCoC,EAAnCpC,KAAM+D,EAA6B3B,EAA7B2B,gBAAiBC,EAAY5B,EAAZ4B,QACpC4B,EAAc3C,YAAgBjD,GAC9BiE,EAAYhB,YAAgBc,GAE5B8B,EAAM7C,mBAASc,EAAUjE,MAAMF,YAE/BmG,EAAa9B,EAAQiB,KAAI,SAACc,EAASrK,GACrC,OAAO,cAAC,EAAD,CAAeiH,OAAQoD,EAAInD,MAAOlH,GAAQA,MAErD,OACI,qCACI,qBAAKiB,UAAU,oBAAf,mCACA,sBAAKA,UAAU,iBAAf,UACI,gCAAK,mBAAGA,UAAU,eAAb,mBAAsCiJ,EAAY3F,gBACvD,gCAAK,mBAAGtD,UAAU,eAAb,oBAAuCkJ,EAA5C,kBACA,gCAAK,mBAAGlJ,UAAU,eAAb,iBAAoCsH,EAAUhE,gBACnD,gCAAK,mBAAGtD,UAAU,eAAb,mBAAqC,8BAAMyH,YAAYN,EAAUxG,KAAKqC,WAAY,SACvF,gCAAK,mBAAGhD,UAAU,eAAb,qBAAL,KAA+CqH,EAAQrI,UACvD,8BAAMmK,WCjETE,EAAU,SAACnK,GAAuE,IAAD,QA2BtFoK,EA1BIxI,EAAuC5B,EAAvC4B,IAAKiD,EAAkC7E,EAAlC6E,QAASC,EAAyB9E,EAAzB8E,YAAahD,EAAY9B,EAAZ8B,QAEnC,EAA8BH,mBAAS,IAAvC,mBAAO0I,EAAP,KAAgBC,EAAhB,KACA,EAAkC3I,oBAAS,GAA3C,mBAAO4I,EAAP,KAAkBC,EAAlB,KACA,EAAsC7I,mBAAS,IAA/C,mBAAOgI,EAAP,KAAoBc,EAApB,KACMC,EAAM,uCAAG,8BAAAtH,EAAA,6DAEXoH,GAAa,GACTG,EAAMC,KAAKD,MAHJ,SAImB7F,EAAYlD,EAAIF,SAJnC,OAIPmJ,EAJO,OAKXJ,EAAe,+BAAD,SAAyBG,KAAKD,MAAOA,GAAM,KAAMG,QAAQ,GAAzD,MACdN,GAAa,GAEbF,EAAWS,KAAKC,MAAMH,IARX,2CAAH,qDAWNnF,EAAY9D,EAAI+D,KAAQ,qCAC1B,qBAAK7E,UAAU,aAAf,kCACA,qBAAKA,UAAU,cAAf,kBACA,sBAAKA,UAAU,WAAf,4BAAgCc,EAAI+D,YAApC,aAAgC,EAAUsF,KAAKnH,cAC/C,qBAAKhD,UAAU,cAAf,kBACA,sBAAKA,UAAU,WAAf,4BAAgCc,EAAI+D,YAApC,aAAgC,EAAUL,KAAKxB,iBAC5C,KAEPzD,QAAQC,IAAI,WAAWsB,EAAIgE,UAG3B,IAAK,IAAD,EACAwE,EAAqB,gCACjB,qBAAKtJ,UAAU,cAAf,iCACA,qBAAKA,UAAU,WAAf,mBAA4Bc,EAAI8D,UAA2BuF,YAA3D,aAA2B,EAAsCnH,gBAEvE,MAAOX,GACL9C,QAAQC,IAAI6C,GAIhB,IAAI+H,GAAeX,EAAS,iBAAV,kBAElB,OACI,gCACI,qBAAKzJ,UAAU,QAAf,SAAwBgB,IACxB,gCACI,qBAAKhB,UAAU,aAAf,6BACA,qBAAKA,UAAU,OAAf,SAAuBc,EAAIR,YAE/B,gCACI,qBAAKN,UAAU,aAAf,mCACA,qBAAKA,UAAU,OAAf,SAAuBc,EAAIT,iBAE/B,gCACI,qBAAKL,UAAU,aAAf,+BACA,sBAAKA,UAAU,OAAf,UAAuBc,EAAIP,OAA3B,0BAEA,gCACI,qBAAKP,UAAU,aAAf,8BACJ,sBAAKA,UAAU,OAAf,oBAA8Bc,EAAIuJ,aAEtC,gCACKf,EACD,uCACA,qBAAKtJ,UAAU,WAAf,mBAA2Bc,EAAIH,YAA/B,aAA2B,EAAUqC,aACrC,yCACA,qBAAKhD,UAAU,WAAf,mBAA2Bc,EAAIgE,gBAA/B,aAA2B,EAAcwF,QAAQtH,SAAS,YAE9D,8BAAM4B,IACN,uBACA,wBAAQ5E,UAAU,mBAAmBoF,QAASrB,EAA9C,mBACA,sBAAM/D,UAAU,SAChB,wBAAQA,UAAWoK,EAAahF,QAASwE,EAAzC,0BACA,uBACA,cAAC,EAAD,CAAWzB,YAAaoB,EAASV,YAAaA,S,iCCnF1D,4DAMA0B,IAASzK,OACL,cAAC,IAAD,IACA0K,SAASC,eAAe,U,uICR5B,oOAiBO,SAAShJ,EAAWiJ,GAGvB,IAFA,IAAIC,EAAQ,GACRC,GAA4B,MAAnBF,EAAY,GAAaA,EAAYG,OAAO,GAAKH,GAAaI,MAAM,KACxE/L,EAAI,EAAGA,EAAI6L,EAAM5L,OAAQD,IAAK,CACnC,IAAIgM,EAAOH,EAAM7L,GAAG+L,MAAM,KAG1BH,EAAMK,mBAAmBD,EAAK,KAAOC,mBAAmBD,EAAK,IAAM,IAEvE,OAAOJ,EAGJ,SAAS7I,EAAoBmJ,GAIhC,IAHA,IAAIC,EAAgBC,KAAKF,GACrBG,EAAMF,EAAclM,OACpBqM,EAAQ,IAAIvM,WAAWsM,GAClBrM,EAAI,EAAGA,EAAIqM,EAAKrM,IACrBsM,EAAMtM,GAAKmM,EAAcI,WAAWvM,GAExC,OAAOsM,EAAM3M,OAGV,SAASuE,EAASsI,GACrB,IAAIC,EAAIC,OAAKC,QAAQ/M,EAAO0E,KAAKkI,EAAW,WAExCI,EAAkBC,uBAAaJ,EAAE,GAAGK,cAEpCpG,EAAUkG,EAAgBhL,KAAKmL,KAAK,GACxC,IAAKrG,EACD,MAAO,CACHpC,KAAMsI,EAAgBxF,KAAK5C,KAC3BC,GAAImI,EAAgBxF,KAAK5C,KACzB+F,kBAAmBqC,EAAgB9G,MAG3C,IAAIkH,EAAQtG,EAAQoG,aAChBG,EAAeJ,uBAAaG,GAC1BE,EAAYD,EAAa7F,KAE/B,MAAO,CACHkE,OAAQ4B,EAAU5B,OAClBhH,KAAMsI,EAAgBxF,KAAK5C,KAC3BC,GAAIwI,EAAa7F,KAAK5C,KACtBsB,KAAMmH,EAAanH,KACnBlE,KAAMqL,EAAarL,KACnBuC,MAAO+I,EAAU/I,MAAMkD,OAgCxB,SAASE,EAAgB4F,GAC5B,IAAMxN,EAASC,EAAO0E,KAAK6I,EAAIC,MAC/B,OAAO,IAAIC,UAAQF,EAAIG,UAAW3N,GAK/B,SAAS+I,EAAY/C,EAAa0G,GACrC,OAAI1G,EAAI1F,OAASoM,EACN1G,EAEL,GAAN,OAAUA,EAAIoD,UAAU,EAAGsD,GAA3B,OAGG,SAASnE,EAAgBT,GAC5B,OAAOA,EAAQsB,UAAU,EAAG,GAAK,MAAQtB,EAAQsB,UAAU,GAAI,O","file":"static/js/main.f90ec481.chunk.js","sourcesContent":["import { useCallback, useRef, useState, useEffect } from 'react';\nimport { useDropzone } from \"react-dropzone\";\nimport BigNumber from \"bignumber.js\";\nimport './custom.css';\nimport './index.css';\nimport { BocInfo } from './BocInfo';\nimport { BocExample } from './BocExample';\nimport { parseQuery, base64ToArrayBuffer, parseBoc } from './utils'\nimport  { Html5QrcodeScanner } from 'html5-qrcode'\nimport TonWeb from \"tonweb\";\nimport { estimateBoc } from './api';\nimport { Address, Cell, RawStateInit } from 'ton';\nimport BN from \"bn.js\";\n\n\nconst tonweb = new TonWeb();\nconst qr_image = 'data:image/png;base64,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';\n\nfunction array_buffer_to_buffer(ab: ArrayBuffer) {\n    const buffer = new Buffer(ab.byteLength);\n    const view = new Uint8Array(ab);\n    for (let i = 0; i < buffer.length; ++i) {\n        buffer[i] = view[i];\n    }\n    return buffer;\n}\n\n\nexport type boc  = {\n    destination: string;\n    wallet: string;\n    amount: number\n    flags: string\n    refLen: number\n    bocData: any\n    body?: any\n    stateInit?: RawStateInit \n    bodyCell?: Cell\n    rawData?: any\n    init?: any\n    bounce?: boolean\n};\n\n\n\nfunction App() {\n    const initialBoc = {\n        destination: 'x',\n        wallet: '',\n        amount: '-1',\n        flags:'0x',\n        refLen: -1,\n        bocData: new Uint8Array(0),\n        body: '',\n        rawData: undefined,\n    } as any;\n\n    /** State */\n    const [boc, setBoc] = useState(initialBoc);\n    const [bocName, setBocName] = useState('');\n    const [error, setError] = useState('');\n    const file: any = useRef(null);\n    const [deploying, setDeploying] = useState(0);\n    const [readingQR, setReadingQrMode] = useState(0);\n    useEffect( ()=> {\n        let params = parseQuery(window.location.search) as any;\n        if(params.boc) {\n            let u8Arr = base64ToArrayBuffer(params.boc );\n            loadBoc(u8Arr, {});\n        }\n    }, []);\n\n    var onDeploy = async (e: any) => {\n        e.stopPropagation();  \n        setDeploying(1);\n        await tonweb.sendBoc(boc.bocData);\n        \n        setTimeout( ()=> { setDeploying(2)}, 200);\n        setTimeout( ()=> { setDeploying(0)}, 5000);\n    }\n\n    const onFileChange = useCallback((_event: any) => {\n                let fr = new FileReader();\n                \n                fr.onload = async function (e: any) {\n                    console.log(e.target.result);\n                    loadBoc(e.target.result, file.current.files[0]);\n                }\n            fr.readAsArrayBuffer(file.current.files[0]);\n    }, []);\n\n    function loadBoc(fileBuffer: any, fileObject: any) {\n        if(fileObject.name.indexOf('.boc') === -1 ) {\n            setError('Invalid file name, file must have the *.boc extention');\n            return;\n        }\n        if(fileBuffer.byteLength < 100) {\n            setError('Invalid file size, boc file should be larger than 100 bytes');\n            return;\n        }\n        console.log('base64', array_buffer_to_buffer(fileBuffer).toString('base64'));\n        let bocData = parseBoc(array_buffer_to_buffer(fileBuffer).toString('base64'));\n        if (!bocData.value) {\n            // @ts-ignore\n            bocData.value = new BN('0');\n        }\n        console.log({mydata: bocData});\n        const wallet = (bocData.from as Address).toFriendly()!!\n        const dest = (bocData.to as Address).toFriendly()\n\n        setBoc({\n            rawData: array_buffer_to_buffer(fileBuffer) as any,\n            ...bocData,\n            wallet: wallet,\n            destination: dest,\n            amount: new BigNumber(bocData.value.toString(10)).div(1e9).toFormat(4),\n            body: bocData?.body?.toString()!!,\n        });\n\n    }\n\n    function loadBocFromStr(bocStr: string) {\n        setBoc(initialBoc);\n        let bocData = parseBoc(bocStr);\n        if (!bocData.value) {\n            // @ts-ignore\n            bocData.value = new BN('0');\n        }\n        console.log('loadBocFromStr',{mydata: bocData});\n\n        const wallet = (bocData.from as Address).toFriendly()!!\n        const dest = (bocData.to as Address).toFriendly()\n        setBoc({\n            rawData: bocStr,\n            ...bocData,\n            wallet: wallet,\n            destination: dest,\n            amount: new BigNumber(bocData.value.toString(10)).div(1e9).toFormat(4),\n            body: bocData?.body?.toString()!!,\n            stateInit: bocData.init,\n            bodyCell : bocData?.body,\n        });\n\n    }\n\n    function onDrop(files: File[]) {\n        let fr = new FileReader();\n        fr.onload = async function (e: any) {\n            loadBoc(e.target.result, files[0]);\n        }\n        fr.readAsArrayBuffer(files[0]);\n    }\n\n\n    const { getRootProps } = useDropzone({onDrop});\n    const bocData = boc.wallet ? <BocInfo boc={boc} bocName={bocName} onClear={() => { setBoc(initialBoc); }} estimateBoc={estimateBoc} /> : \n        (<div>\n            {/* <div className='button is-info' onClick={(e)=> { setReadingQrMode(0); e.stopPropagation();  }}>\n                 <img className='btn-2 qr-logo qr-logo-btn' src={qr_image}></img>Scan QR Code\n            </div> */}\n            <span className='p-10'></span>\n            <span className=''> </span> \n            <input id=\"file-upload\" ref={file} type=\"file\" className='file ' onChange={onFileChange}></input>    \n            <label htmlFor=\"file-upload\" className=\"button is-info\">Upload Boc File</label>\n        </div>);    \n  \n    let klass = deploying == 1 ? 'busy' : '';\n    let deployDoneMessage = null;\n    if(deploying == 2) {\n        deployDoneMessage = <div className='deploy-message'>Boc Deployment Completed</div>\n    }\n\n    let qrReader = null;\n    if(readingQR) {\n        qrReader = (<QrReader onDone={onQrRead} />)\n    } else {\n        qrReader = null;\n    }\n\n    function onQrRead(data: string) {\n        setReadingQrMode(0);\n        let u8Arr = base64ToArrayBuffer(data);\n        loadBoc(u8Arr, {name:'qr.boc'});\n    }   \n\n    const dropArea =  boc.bocData == new Uint8Array(0) ? null : (<div className='drop-zone' {...getRootProps()}></div>)\n\n    return (\n        <div className=\"App\">\n            <div className='title'>Ton Boc VM</div>\n            <div className='font-xl'>💎 💼 🖥 </div>\n        <div className=\"app-main\">\n\n                <BocExample parseBoc={(str: string) => {\n                    loadBocFromStr(str);\n                }} setName={(name: string) => {\n                    setBocName(name);\n                }} />\n            <div className={klass}>\n                    {boc.error ? (<div className='boc-error'>{boc.error}</div>) : null}\n                {boc.wallet ? null : dropArea}\n                {boc.wallet ? null :qrReader}\n                {bocData}\n                {deployDoneMessage}\n            </div>\n        </div>\n    </div>);\n}\n\nconst QrReader = ( props: any ) => {\n    let once = false;\n    function onScanSuccess(decodedText: string, decodedResult: any) {\n        if(once) {\n            return;\n        }\n        once = true;\n        console.log('onScanSuccess',decodedText)\n        props.onDone(decodedText)\n    }\n\n    useEffect(() => {\n        var html5QrcodeScanner = new Html5QrcodeScanner(\"qr-reader\", { fps: 10, qrbox: 250,  }, false);\n        html5QrcodeScanner.render(onScanSuccess, undefined);\n          \n      }, []);\n        \n    return (\n        <div>\n            <h3><img className='qr-logo' src={qr_image}></img>Scan QR Code</h3>\n            <div id=\"qr-reader\" ></div>\n            <div className='qrReader'></div>\n        </div>)\n            \n}\n\n\nexport default App;\n","\nconst BOC_WITH_STATE_INIT = 'te6cckECAwEAAQ8AAt+IAbcaWXVUguqdxz4NjDzLseJCFvWPlUckZQ7AwWRqvm78EZ50PcvxScy9x3qXO+Do6kpHnnPlEFZiHF4DuyhYcUGUaIiiRsTdjDmm+SSmb2czzydjnagg0zLnNeWmUh1KyAClNTRi/////+AAAAAQAQIA3v8AIN0gggFMl7ohggEznLqxn3Gw7UTQ0x/THzHXC//jBOCk8mCDCNcYINMf0x/TH/gjE7vyY+1E0NMf0x/T/9FRMrryoVFEuvKiBPkBVBBV+RDyo/gAkyDXSpbTB9QC+wDo0QGkyMsfyx/L/8ntVABQAAAAACmpoxcnJTZWfAxBC0SpxXMaIHJbrgfb9No7xJuHNDXaluLadzgetvk=';\nconst BOC_REGULAR_TX = 'te6cckEBAgEAqQAB34gBtxpZdVSC6p3HPg2MPMux4kIW9Y+VRyRlDsDBZGq+bvwBGJ82qnbjKmXg2u8Of75PNExfAShOBw8CeFHsqAlP364VGB5bEmZyQllIAE3YESvKWOB22QsEC2NFl1AU9FuQWU1NGLsZbKaYAAAACBwBAGhiAHXG0W1CXIYD9CYFNJmdkDcOTrv6yoxMePd0iiCVO26WIBfXhAAAAAAAAAAAAAAAAAAA3/KpOA==';\n\nconst SWAP_TON_JETTON =\n    \"te6cckEBAgEAvwAB34gBxw5akQfJaXlBLYO7rsolHBjY6Ik5Q1Lb9shmS/UwX+QHWFrwTABHCdMlIIRLpZbyRs1h5v/mhUOS+cAq3kR2vT+jhNDvpZxGuQcPveMm5XyHFlZXc/f+8tiIXn13NISwOU1NGLsa8z7QAAAMgBwBAJRiAG01gF4g3YBE6C155WD4bBwzVaPiwwux6+ELuGVQS1OdIh+YKAAAAAAAAAAAAAAAAAAAAAAAGQAAAAAAAAABQ7msoAXjF4cRtdX05xc=\";\n\nconst SWAP_JETTON_TON =\n    \"te6cckECAwEAAQ8AAd+IAccOWpEHyWl5QS2Du67KJRwY2OiJOUNS2/bIZkv1MF/kBnRSZfWv+62Sayl1lgAMMqDMLT+mekwqIHxlXL1jW+mEkMkaTI0BkS2vX2IAA0Q+FgbTyW2zvLm4Up/kjpBNEFlNTRi7GihegAAADFgcAQFoYgAsINhSTiB00s++1QqrBeb4d1/4USV8aWHz2lw8jgvH06BCwdgAAAAAAAAAAAAAAAAAAQIAxQ+KfqUAAAAAAAAAAWWvMQekAAgBJRzl59Y42NrFTK/xPHgN0bvOu3ZL1501dw55CQFGsuMAOOHLUiD5LS8oJbB3ddlEo4MbHREnKGpbftkMyX6mC/yICrqVAAAAABhBfqjMWOUNPJw=\";\n\nconst DEPLOY_JETTON = \"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\";\n\n\nexport const BocExample = ( props: {parseBoc: Function, setName: Function}) => {\n    \n    function onclick(data: any, name:string) {\n        props.parseBoc(data);\n        props.setName(name);\n    }\n\n    return (\n        <div className=\"border-b\">\n            <div>Boc Examples</div>\n            <div onClick={onclick.bind(null, BOC_REGULAR_TX, 'boc empty')} className=\"boc-button\">boc empty</div>\n            {/* <div onClick={onclick.bind(null, BOC_WITH_STATE_INIT, 'boc boc')} className=\"boc-button\">boc boc-state-init</div> */}\n            <div onClick={onclick.bind(null, DEPLOY_JETTON, 'Deploy Jetton')} className=\"boc-button\">Deploy Jetton</div>\n            <div onClick={onclick.bind(null, SWAP_JETTON_TON, 'Swap ton')} className=\"boc-button\">Swap Jetton to Ton</div>\n            <div onClick={onclick.bind(null, SWAP_TON_JETTON, 'Swap Jetton')} className=\"boc-button\">Swap Ton to Jetton</div>\n        </div>   )\n}","\n\nconst BOC_BACKEND = process.env.REACT_APP_BOC_BACKEND ||   'http://localhost:8080';\n\nexport async function estimateBoc(message: any) {\n    let res = await fetch(`${BOC_BACKEND}/sendBoc`, { \n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: `{ \"boc\": \"${message}\" }`,\n    });\n    let data = await res.text();\n    return data;\n}","import { fromNano } from \"ton\";\nimport { addressFromJson } from \"./utils\";\n\n\n\nexport const MessageAction = ({ action, index }: any) => {\n    console.log(action);\n\n    const { type, mode, message } = action;\n    console.log(message.info.value.coins);\n    \n    const value = fromNano(message.info.value.coins)\n    const dest = addressFromJson(message.info.dest);\n        \n    return (<div className='flex action-line text-3xl font-bold underline text-red-600'>\n        \n        <div>{index+1})<b className=''> type:</b>{type}</div>\n        <div><b className=''>mode:</b>{mode}</div>\n        <div><b className=''>value:</b>{value}💎</div>\n        <div><b className=''>dest:</b>{dest.toFriendly()}💎</div>\n        \n        {/* <div><b className='res-property'>from:</b>{fromAddress.toFriendly()}</div>\n        <div><b className='res-property'>from:</b>{fromAddress.toFriendly()}</div> */}\n    </div>)\n}","import { Address, fromNano } from \"ton\";\nimport { addressEllipsis, addressFromJson, strEllipsis } from \"./utils\";\nimport { toSvg } from \"jdenticon\";\n\n\nconst AddressAvatar = ({ address, size }: any) => {\n    const content = toSvg(address, size);\n\n    return <span className=\"address-avatar\" dangerouslySetInnerHTML={{ __html: content }}></span>;\n    \n}\n\nconst AddressLinkAndAvatar = ({ address }: any) => {\n    \n    const link = `https://tonscan.org/address/${address.toFriendly()}`;\n    return (<div className=\"message-address\">\n        <a href={link}>\n            <AddressAvatar size={32} address={address.toFriendly()} />\n            <br />\n            {addressEllipsis(address.toFriendly())}\n        </a>\n    </div>);\n}\n\nexport const MessageBox = ( { message }: any) => {\n\n    if (!message) {\n        return <div>empty</div>\n    }\n    const { inMessage, from, contractAddress, actions, exit_code } = message;\n    const fromAddress = addressFromJson(from);\n    const myAddress = addressFromJson(contractAddress);\n    const tonValue = fromNano(inMessage.value.toString());\n    \n    \n    \n    // const actionList = actions.map((it: any, i: number) => {\n    //     return <MessageAction action={it} index={i} key={i} />\n    // })\n\n    return (\n        <>\n            <div className='message-item'>\n                <AddressLinkAndAvatar address={myAddress} />\n                <TxDetails message={message} />\n                {/* <div className=\"message-address\"><AddressAvatar  size={32} address={myAddress.toFriendly()}/> {addressEllipsis(myAddress.toFriendly())}</div> */}\n                <div className='message-item-body'>\n                    \n                    {/* <div><b className='message-item-row'>from:</b>{addressEllipsis(fromAddress.toFriendly())}</div> */}\n                    <div className=\"message-box-value\">Value: {tonValue}💎</div>\n                    <div>\n                        <div>body:</div>\n                        <pre className=\"message-body-pre\">{strEllipsis(inMessage.body.toString(), 16)}</pre>\n                    </div>\n                    \n                    \n                    <div>🎬 <b className='message-item-row'>actions</b>: {actions.length}</div>\n                    <br />\n                    {/* <div>{actionList}</div> */}\n                </div>\n            </div>\n        </>)\n}\n\n\nfunction feeFmt(hexStr: string) {\n    let nano = fromNano(hexStr);\n    let dotIndex = nano.indexOf('.')\n    return nano.substring(0, dotIndex + 9);\n}\n\n\nexport const TxDetails = ({ message }: any) => {\n    \n    return (<div className=\"tx-details-box\">\n        \n        <div className=\"fee-row\">\n            <b >compute:</b>\n            <div className=\"fee-value\">{feeFmt(message.computationFee)}💎</div>\n        </div>\n        \n        <div className=\"fee-row\">\n            <b>fwd:</b>\n            <div className=\"fee-value\">{feeFmt(message.fwdFee)}💎</div>\n        </div>\n        <div className=\"fee-row\">\n            <b>exit code:</b>\n            <div className=\"fee-value\">{message.exit_code}</div>\n        </div>\n        \n    </div>)\n}","import {  Address, Cell, fromNano } from 'ton';\nimport { MessageAction } from './MessageAction';\nimport { MessageBox } from './MessageBox';\nimport { addressEllipsis, addressFromJson, strEllipsis } from './utils';\n\n\nexport const BocResult = (props: { messageList: any, loadingTime:string }) => {\n    console.log(props);\n    \n    const { messageList } = props;\n    console.log(messageList);\n    if (!messageList || Object.keys(messageList).length == 0) {\n        return <div></div>\n    }\n    const messages = messageList.messageList.map(  (message: any, index: number) => {\n        return <Message message={message} key={index} />\n    });\n\n    const { chain } = messageList; \n    const messagesChain = [];\n    let chainCounter = 0;\n    for(const key in chain) {\n        messagesChain.push( <MessagesChain chain={chain[key]} key={key} indent={chainCounter++} />)\n    }\n    \n    \n    \n    return (\n        <div className='boc-output'>\n            <div className='mini-header p-20'>\n                {props.loadingTime}\n            </div>\n            {messagesChain}\n            {/* {messages} */}\n        </div>\n    )\n}\n\n\nconst MessagesChain = ({ chain, indent }: any) => {\n    const messagesChain = chain.map(  (message: any, index: number) => {\n        return <MessageBox message={message} key={index} />\n    });\n    const _class = `flex indent-${indent}`\n    return (<div className={_class}>\n        {messagesChain}\n    </div>)\n}\n\n\n\n\n\nconst Message = ( { message }: any) => {\n\n    if (!message) {\n        return <div>empty</div>\n    }\n    const { inMessage, from, contractAddress, actions } = message;\n    const fromAddress = addressFromJson(from);\n    const myAddress = addressFromJson(contractAddress);\n    \n    const val = fromNano(inMessage.value.toString());\n    \n    const actionList = actions.map((it: any, i: number) => {\n        return <MessageAction action={it} index={i} key={i} />\n    })\n    return (\n        <>\n            <div className='header-boc-output'>Boc's Messages output</div>\n            <div className='message-result'>\n                <div><b className='res-property'>from:</b>{fromAddress.toFriendly()}</div>\n                <div><b className='res-property'>value:</b>{val}💎</div>\n                <div><b className='res-property'>To:</b>{myAddress.toFriendly()}</div>\n                <div><b className='res-property'>body:</b><pre>{strEllipsis(inMessage.body.toString(), 50)}</pre></div>\n                <div><b className='res-property'>actions</b>: {actions.length}</div>\n                <div>{actionList}</div>\n            </div>\n        </>)\n}\n\n\n\n","\nimport {  useState } from 'react';\nimport { RawStateInit } from 'ton';\nimport { boc } from './App';\nimport { BocResult } from './BocResult';\nimport BN from \"bn.js\";\n\ntype BocResult = {\n    \n}\n\nexport const BocInfo = (props: {boc: boc, bocName:string, onClear: any, estimateBoc: any}) => {\n    const { boc, onClear, estimateBoc, bocName } = props;\n\n    const [results, setResults] = useState({} as BocResult);\n    const [isLoading, setIsLoading] = useState(false);\n    const [loadingTime, setLoadingTime] = useState(\"\");\n    const runBoc = async () => {\n        //@ts-ignore\n        setIsLoading(true);\n        let now = Date.now();\n        let bocResultResponse = await estimateBoc(boc.rawData);\n        setLoadingTime( `🚌 execution took ${((Date.now()- now) /1000).toFixed(2)}s` )\n        setIsLoading(false);\n        \n        setResults(JSON.parse(bocResultResponse));\n    }\n    \n    const stateInit = boc.init ? (<>\n        <div className='mini-title'>Message State Init: </div>\n        <div className=\"mini-header\">Code</div>\n        <pre className='pre-body'>Code:{boc.init?.code.toString()}</pre>\n        <div className=\"mini-header\">Data</div>\n        <pre className='pre-body'>Data:{boc.init?.data.toString()}</pre>\n    </>) : null;\n    \n    console.log('boc.body',boc.bodyCell);\n    //@ts-ignore\n    let externalStateInit;\n    try {\n        externalStateInit = (<div>\n            <div className=\"mini-header\">External State Init</div>\n            <pre className='pre-body'>{(boc.stateInit as RawStateInit).code?.toString()}</pre>\n        </div>)\n    } catch (e) {\n        console.log(e);\n        \n    }\n\n    let buttonClass = (isLoading ? `is-loading` : ``)+ ` button is-info`\n\n    return (\n        <div>\n            <div className='title'>{bocName}</div>\n            <div>\n                <div className='mini-title'>Source Wallet: </div>\n                <div className='addr'>{boc.wallet}</div>\n            </div>\n            <div>\n                <div className='mini-title'>Destination Address: </div>\n                <div className='addr'>{boc.destination}</div>\n            </div>\n            <div>\n                <div className='mini-title'>Transfer Amount: </div>\n                <div className='addr'>{boc.amount} TON 💎</div>\n            </div>\n                <div>\n                    <div className='mini-title'>Internal Flags: </div>\n                <div className='addr'>Bounce:{boc.bounce}</div>\n            </div>\n            <div>\n                {externalStateInit}\n                <div>Cell</div>\n                <pre className='pre-body'>{boc.body?.toString()}</pre>\n                <div>Base64</div>\n                <pre className='pre-body'>{boc.bodyCell?.toBoc().toString(\"hex\")}</pre>\n            </div>\n            <div>{stateInit}</div>\n            <br/>\n            <button className='button is-danger' onClick={onClear}>Clear</button>\n            <span className='p-10'></span>\n            <button className={buttonClass} onClick={runBoc}>Estimate BOC</button>\n            <br></br>\n            <BocResult messageList={results} loadingTime={loadingTime} />\n        </div>\n        )\n    };\n    ","// import 'react-app-polyfill/stable';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App/>,\n    document.getElementById('root')\n);\n","import { parseMessage, parseStateInit, Cell, Slice, Address, RawCommonMessageInfo, RawCurrencyCollection } from \"ton\";\nimport BN from \"bn.js\";\n\ntype RawCommonMessageInfoInternal = {\n    type: \"internal\";\n    ihrDisabled: boolean;\n    bounce: boolean;\n    bounced: boolean;\n    src: Address | null;\n    dest: Address | null;\n    value: RawCurrencyCollection;\n    ihrFee: BN;\n    fwdFee: BN;\n    createdLt: BN;\n    createdAt: number;\n};\n\nexport function parseQuery(queryString: string) {\n    var query = {};\n    var pairs = (queryString[0] === \"?\" ? queryString.substr(1) : queryString).split(\"&\");\n    for (var i = 0; i < pairs.length; i++) {\n        var pair = pairs[i].split(\"=\");\n\n        //@ts-ignore\n        query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || \"\");\n    }\n    return query;\n}\n\nexport function base64ToArrayBuffer(base64: string) {\n    var binary_string = atob(base64);\n    var len = binary_string.length;\n    var bytes = new Uint8Array(len);\n    for (var i = 0; i < len; i++) {\n        bytes[i] = binary_string.charCodeAt(i);\n    }\n    return bytes.buffer;\n}\n\nexport function parseBoc(base64Boc: string) {\n    let c = Cell.fromBoc(Buffer.from(base64Boc, \"base64\"));\n\n    let externalMessage = parseMessage(c[0].beginParse());\n\n    let message = externalMessage.body.refs[0];\n    if (!message) {\n        return {\n            from: externalMessage.info.dest,\n            to: externalMessage.info.dest,\n            externalStateInit: externalMessage.init,\n        };\n    }\n    let slice = message.beginParse();\n    let innerMessage = parseMessage(slice);\n    const innerInfo = innerMessage.info as RawCommonMessageInfoInternal;\n\n    return {\n        bounce: innerInfo.bounce,\n        from: externalMessage.info.dest,\n        to: innerMessage.info.dest,\n        init: innerMessage.init,\n        body: innerMessage.body,\n        value: innerInfo.value.coins,\n    };\n}\n\nexport function readInternalMessage2(slice: Slice) {\n    let _tag = slice.readUint(1); //tag\n    const ihrDisabled = slice.readBit();\n    const bounce = slice.readBit();\n    const bounced = slice.readBit();\n    const src = slice.readAddress();\n    const destination = slice.readAddress();\n    const value = slice.readCoins();\n    const ihrFee = slice.readCoins();\n    const fwdFee = slice.readCoins();\n    const createdLt = slice.readUint(64);\n    const createdAt = slice.readUintNumber(32);\n    return {\n        type: \"internal\",\n        ihrDisabled,\n        bounce,\n        bounced,\n        src,\n        dest: destination,\n        destination,\n        value,\n        ihrFee,\n        fwdFee,\n        createdLt,\n        createdAt,\n    };\n}\n\nexport function addressFromJson(arg: { workchain: number; hash: any }) {\n    const buffer = Buffer.from(arg.hash);\n    return new Address(arg.workchain, buffer);\n}\n\nexport function bnToStr(arg: { workchain: number; hash: any }) {}\n\nexport function strEllipsis(str: string, len: number) {\n    if (str.length < len) {\n        return str;\n    }\n    return `${str.substring(0, len)}...`;\n}\n\nexport function addressEllipsis(address: string) {\n    return address.substring(0, 6) + \"...\" + address.substring(42, 48);\n}\n"],"sourceRoot":""}